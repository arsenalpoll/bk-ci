<!-- BEGIN MUNGE: GENERATED_TOC -->
- [v2.0.0-beta.18](#v200-beta18)
   - [Changelog since v2.0.0-beta.17](#changelog-since-v200-beta17)

<!-- END MUNGE: GENERATED_TOC -->



<!-- NEW RELEASE NOTES ENTRY -->
# v2.0.0-beta.18
## Changelog since v2.0.0-beta.17
#### 新增
- [新增] [stream]兼容snakeyaml解析出错 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8823)
- [新增] kubernetes构建机支持专机配置 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8858)
- [新增] worker路径的tag需要去掉容器化标志 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8869)
- [新增] 流水线构建详情页重构需求 [链接](http://github.com/TencentBlueKing/bk-ci/issues/7983)
- [新增] 网关新增强制容器化header [链接](http://github.com/TencentBlueKing/bk-ci/issues/8863)
- [新增] 蓝盾对接权限中心RBAC [链接](http://github.com/TencentBlueKing/bk-ci/issues/7794)
- [新增] 增加获取代码库详情openapi接口 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8850)
- [新增] 容器化route_tag区分ci和codecc [链接](http://github.com/TencentBlueKing/bk-ci/issues/8848)
- [新增] 主集群和子集群间构建制品网关与流量网关的配置优化 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8505)
- [新增] BkRepoClient请求增加X-BKREPO-PROJECT-ID请求头 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8814)
- [新增] 流水线国际化相关优化 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8683)
- [新增] spring 优雅停机 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8833)
- [新增] 优化首页文案 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8612)
- [新增] 新增环境页面优化 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8622)
- [新增] 关联代码库页面优化 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8621)
- [新增] callback禁用后应该发送通知 Tencent [链接](http://github.com/TencentBlueKing/bk-ci/issues/7939)
- [新增] issue: 网关支持切换整个route_tag到容器化 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8827)
- [新增] 添加项目管理前端服务 issue TencentBlueKing [链接](http://github.com/TencentBlueKing/bk-ci/issues/7923)
- [新增] 修复kubernetes构建容器ID格式兼容 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8811)
- [新增] P4事件触发支持自主选择对大小写是否敏感 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8540)
- [新增] 无编译构建机调度优化 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8692)
- [新增] [bug] 并发组排队异常 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8794)
- [新增] 构建详情中制品查询提供新接口 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8097)
- [新增] 修复“服务扩展点初始化异常“问题 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8779)
- [新增] 获取第三方构建机信息使用agentId [链接](http://github.com/TencentBlueKing/bk-ci/issues/8778)
- [新增] 流水线插件支持展示获得的荣誉和SLA等信息 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8114)
- [新增] 网关backend路径新增remotedev [链接](http://github.com/TencentBlueKing/bk-ci/issues/8768)
- [新增] [stream]注册插件使用ci开启身份进行 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8767)
- [新增] 调整网关redis线程池大小 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8763)
- [新增] build_chart脚本不再依赖bkenv.properties [链接](http://github.com/TencentBlueKing/bk-ci/issues/8661)
- [新增] 优化websocket的日志, 避免日志过大 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8756)
- [新增] 修改Git触发的判断条件 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8570)
- [新增] 转发请求到容器化网关时带上token [链接](http://github.com/TencentBlueKing/bk-ci/issues/8725)
- [新增] Stream:新表达式引擎大小写不敏感bug [链接](http://github.com/TencentBlueKing/bk-ci/issues/8737)
- [新增] 记录vo、v3鉴权结果 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8500)
- [新增] 修复chart的BUG [链接](http://github.com/TencentBlueKing/bk-ci/issues/8662)
- [新增] 环境管理 环境agent详情页 部分中文未被翻译 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8553)
- [新增] github action 的 go 版本升级 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8728)
- [新增] 【stream】concurrency 和蓝盾功能对齐 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8631)
- [新增] Goagent版本优化 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8671)
- [新增] [bug] 质量红线模块表格为空 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8685)
- [新增] 第三方构建机使用 docker 运行构建任务时，支持设置镜像拉取策略 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8635)
- [新增] 限制JVM的 metaspace 大小 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8656)
- [新增] [stream] 优化远程模板凭据引用 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8667)
- [新增] Agent: 优化因为网络问题引起的agent请求报错展示 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8603)
- [新增] 容器换环境不能调用consul [链接](http://github.com/TencentBlueKing/bk-ci/issues/8643)
- [新增] stream构建机传递凭据 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8466)
- [新增] 希望流水线模板实例化流水线时能够继承分组名称的配置 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8616)
- [新增] 优化v4_user_template_get接口 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8550)
- [新增] api文档优化（2022.10-2023.04） [链接](http://github.com/TencentBlueKing/bk-ci/issues/8594)
- [新增] 矩阵支持跨库凭证引用 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8514)
- [新增] p4触发器不主动注册trigger事件 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8556)
- [新增] 【蓝盾-评审会已评审】repo-hook 支持忽略指定的代码库 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8435)
- [新增] [stream]手动触发 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8554)

#### 优化
- [优化] 蓝盾国际化方案优化 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8211)
- [优化] 日志单行输出超过限制（16KB）自动分行 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8856)
- [优化] 部分jooq逻辑优化 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8678)

#### 修复
- [修复] 上下文的状态字段异常 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8861)
- [修复] 日志时间戳乱序导致重复查询 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8804)
- [修复] stream的CodeCC红线指标没有关联忽略问题链接 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8821)
- [修复] stream 登录调试 vmSeqId 参数 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8818)
- [修复] 第三方构建机工作空间变量解析缺少上下文 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8803)
- [修复] 并发组优化 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8809)
- [修复] Linux开机自动启动的agent读取到HOME 变量为空的问题 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8798)
- [修复] 运行开机内置插件时，点击取消可能取消不了构建 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8789)
- [修复] 流水线启动接口性能优化 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8615)
- [修复] 触发频率过高会导致排队取消积压 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8691)
- [修复] 研发商店工作台查询尚无统计数据组件时出现空指针异常 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8743)
- [修复] 自定义插件task.json中使用demands设置环境变量不生效 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8665)
- [修复] Stage条件判断支持新表达式 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8722)
- [修复] 调整metrics数据上报分布式锁过期时间，防止锁过期时间小于业务处理时间 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8648)
- [修复] 质量红线获取项目下可使用插件的指标缺失 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8565)
- [修复] 流水线变量版本仓库过滤器，最多仅支持1w个文件 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8675)
- [修复] 矩阵内支持上下文缩写引用 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8641)
- [修复] 创建自定义指标报错英文名已存在 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8605)
- [修复] 流水线中配有两个相同的codecc任务时，保存指标数据偶现死锁 [链接](http://github.com/TencentBlueKing/bk-ci/issues/8008)
